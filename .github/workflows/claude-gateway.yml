name: Claude Gateway

on:
  workflow_call:
    secrets:
      GITHUB_TOKEN:
        description: "GitHub Token for accessing repository"
        required: true
      CLAUDE_CODE_OAUTH_TOKEN:
        description: "Claude Code OAuth Token"
        required: true

permissions:
  contents: read
  pull-requests: read
  issues: read

jobs:
  gateway:
    uses: lurest-inc/private-workflows/.github/workflows/cc-gateway-receiver.yml@main
    with:
      event_name: ${{ github.event_name }}
      action: ${{ github.event.action || '' }}
      repository: ${{ github.repository }}
      label_name: ${{ github.event.label.name || '' }}
      comment_body: ${{ github.event.comment.body || '' }}
      author_association: ${{ github.event.comment.author_association || '' }}
      issue_number: ${{ github.event.issue.number || '' }}
      pr_number: ${{ github.event.pull_request.number || '' }}
      sender_login: ${{ github.event.sender.login || '' }}
    secrets:
      GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      CLAUDE_CODE_OAUTH_TOKEN: ${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}
