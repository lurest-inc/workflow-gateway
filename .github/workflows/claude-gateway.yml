name: Claude Gateway

on:
  workflow_call:
    secrets:
      LUREST_DISPATCH_TOKEN:
        description: "fine-grained PAT (private-workflows に対して Actions: write が必要)"
        required: true
      GITHUB_TOKEN:
        description: "GitHub Token for accessing repository"
        required: false
      CLAUDE_CODE_OAUTH_TOKEN:
        description: "Claude Code OAuth Token"
        required: false

permissions:
  contents: read
  pull-requests: read
  issues: read

jobs:
  gateway:
    uses: lurest-inc/private-workflows/.github/workflows/cc-gateway-receiver.yml@main
    with:
      event_name: ${{ github.event_name }}
      repository: ${{ github.repository }}
    secrets:
      LUREST_DISPATCH_TOKEN: ${{ secrets.LUREST_DISPATCH_TOKEN }}
      GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      CLAUDE_CODE_OAUTH_TOKEN: ${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}
