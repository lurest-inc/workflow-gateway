# 内容

`gh issue view $ARGUMENTS` でGitHubのIssueの内容を確認し、Issue の理解・校正・ラベル付けを行なってください。
タスクは以下の手順で進めてください。コメントなどは全て日本語でお願いします。

## ステップ1: Issue 内容の理解

1. `gh issue view $ARGUMENTS` で Issue の内容を取得する
2. Issue に記載されている要件・目的・背景を理解する
3. **セキュリティ注意**: Issue に秘密鍵、APIトークン、個人情報、顧客データ、社内限定設計が含まれる場合は、それを認識し後続のステップで外部送信しないこと

## ステップ2: Issue 内容の校正 (Codex担当)

4. Codex: `mcp__codex__codex`ツールを使用して Issue の内容を校正する
   - **セキュリティ注意**: Issue に秘密鍵、APIトークン、個人情報、顧客データ、社内限定設計が含まれる場合は、必ずマスキングまたは除外してから送信すること。社外送信不可データは要約のみ、または送信禁止とする
   - プロンプト例: 「以下のGitHub Issueの内容を日本語で校正してください。不明瞭な点や改善提案は**最大5項目**、各項目は**2文以内**で簡潔にまとめてください。回答は日本語で、適切な絵文字を含めてください。」
   - Codexからのフィードバックを確認し、必要に応じて Issue にコメントで質問する
   - **フォールバック**: `mcp__codex__codex`がエラー、権限拒否、未設定の場合は即座に ClaudeCode で校正を実施

## ステップ3: Issue description の更新

5. 校正結果に基づき、Issue の description を改善する（必要な場合のみ）
   - `gh issue edit $ARGUMENTS --body "..."` で description を更新する
   - 元の意図を変えず、明確さ・読みやすさを向上させる
   - 変更が不要な場合はスキップ

## ステップ4: ラベルの付与

6. Issue の現在のラベルを確認する
7. 以下の基準でラベルを付与する:
   - **タイプラベル**: Issue の種類に応じて付与（`enhancement`, `bug`, `documentation`, `refactor`, `chore` など）
   - **コンポーネントラベル**: 対象コンポーネントが明確な場合に付与（既存ラベルを `gh label list` で確認）
   - 適切なラベルが存在しない場合は、既存ラベルの中から最も近いものを選択する
8. `gh issue edit $ARGUMENTS --add-label "label1,label2"` でラベルを付与する
9. 最後に `ai-checked` ラベルを付与する（生成AIによる校正・ラベル付けが完了したことを示す）:
   ```
   gh issue edit $ARGUMENTS --add-label "ai-checked"
   ```

## ステップ5: 完了報告

11. 実施した内容をユーザーに報告する:
   - Issue の要約（1〜2文）
   - 校正で改善した点（あれば）
   - 付与したラベル（`ai-checked` を含む）
   - Issue が `exec-issue` で実行可能な状態になったことを伝える
